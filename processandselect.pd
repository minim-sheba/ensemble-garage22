#N canvas 952 0 958 956 12;
#X obj 190 286 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 190 379 pack f f f;
#X msg 190 516 \$1 \, \$2 \$3;
#X floatatom 190 344 5 0 0 0 - - - 0;
#X floatatom 350 287 9 0 0 3 duration\ in\ ms - \$0-selected_duration
0;
#X obj 207 440 print;
#X msg 207 411 \$1 \$2 \$3;
#X obj 190 107 bonk~;
#X text 202 463 check values see console, f 12;
#X obj 190 747 line~;
#X obj 282 702 symbol file;
#X msg 240 746 set \$1;
#X obj 306 746 print;
#X floatatom 261 288 8 0 0 3 end - - 0;
#X floatatom 550 135 7 0 0 3 end - - 0;
#X floatatom 638 134 8 0 0 3 duration\ in\ ms - - 0;
#X obj 190 161 spigot;
#X obj 229 139 tgl 15 0 empty empty delay\\\ bonk 17 7 0 10 #fcfcfc
#000000 #000000 0 1;
#X msg 250 106 1;
#X msg 315 113 0;
#X obj 252 75 delay 1000 1 msec;
#N canvas 280 445 1143 500 transposefromvelocity 1;
#X obj 18 17 inlet~;
#X floatatom 19 120 5 0 0 0 - - - 0;
#X obj 18 377 spigot;
#X obj 204 348 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X msg 250 319 0;
#X obj 19 54 env~ 200 500;
#N canvas 1087 180 970 499 scaler 0;
#X obj 30 26 inlet;
#X obj 30 98 -;
#X obj 30 224 /;
#X obj 30 285 *;
#X obj 30 345 +;
#X obj 30 365 outlet;
#X obj 70 26 inlet;
#X obj 70 83 t a a;
#X obj 115 26 inlet;
#X obj 97 169 pack f f;
#X msg 97 189 \$1 \$2;
#X obj 97 209 -;
#X obj 115 136 t b a;
#X obj 160 26 inlet;
#X obj 160 188 t a a;
#X obj 205 26 inlet;
#X obj 187 230 pack f f;
#X msg 187 250 \$1 \$2;
#X obj 187 270 -;
#X obj 205 197 t b a;
#X obj 275 26 loadbang;
#X obj 275 46 t b b b b;
#X obj 77 61 f \$1;
#X obj 212 175 f \$4;
#X obj 167 166 f \$3;
#X obj 122 114 f \$2;
#X text 30 418 abstraction by erash from this thread: https://forum.pdpatchrepo.info/topic/6813/creating-scale-or-range/3
, f 71;
#X text 395 46 1 number input;
#X text 395 67 2 old low value;
#X text 395 89 3 old high value;
#X text 396 112 4 new low value;
#X text 397 133 5 new high value;
#X text 394 26 inlets from left to right:;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 7 0;
#X connect 7 0 1 1;
#X connect 7 1 9 0;
#X connect 8 0 12 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 2 1;
#X connect 12 0 9 0;
#X connect 12 1 9 1;
#X connect 13 0 14 0;
#X connect 14 0 16 0;
#X connect 14 1 4 1;
#X connect 15 0 19 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 3 1;
#X connect 19 0 16 0;
#X connect 19 1 16 1;
#X connect 20 0 21 0;
#X connect 21 0 22 0;
#X connect 21 1 25 0;
#X connect 21 2 24 0;
#X connect 21 3 23 0;
#X connect 22 0 7 0;
#X connect 23 0 19 0;
#X connect 24 0 14 0;
#X connect 25 0 12 0;
#X restore 18 241 pd scaler;
#X floatatom 74 101 5 0 0 0 - - - 0;
#X msg 74 173 80;
#X msg 121 170 0;
#X floatatom 18 298 5 0 0 0 - - - 0;
#X msg 157 202 4;
#X obj 137 116 loadbang;
#X obj 204 18 inlet;
#X obj 250 18 inlet;
#X text 420 24 inlet 1: mic signal;
#X text 419 45 inlet 2: float value (1) from delay;
#X obj 949 166 moses 64;
#X text 942 127 original value for the moses at left, f 19;
#X obj 7 154 moses 50;
#X text 433 189 added 64 as initial lower value to scaler \, changed
moses to 50;
#X msg 45 203 50;
#X text 420 69 inlet 3: spigot triggers 0 message when audio signal
is flowing \, to prevent changing transposition while sound is playing
;
#X floatatom 18 409 5 0 0 0 - - - 0;
#X obj 18 443 s transpose;
#X text 430 154 moses: send velocity over given threshold;
#X text 107 445 sends to pitchshift abstraction;
#X connect 0 0 5 0;
#X connect 1 0 19 0;
#X connect 2 0 23 0;
#X connect 3 0 2 1;
#X connect 4 0 3 0;
#X connect 5 0 1 0;
#X connect 6 0 10 0;
#X connect 7 0 8 0;
#X connect 8 0 6 2;
#X connect 9 0 6 3;
#X connect 10 0 2 0;
#X connect 11 0 6 4;
#X connect 12 0 8 0;
#X connect 12 0 9 0;
#X connect 12 0 11 0;
#X connect 12 0 21 0;
#X connect 13 0 3 0;
#X connect 14 0 4 0;
#X connect 19 1 6 0;
#X connect 21 0 6 1;
#X connect 23 0 24 0;
#X restore 12 191 pd transposefromvelocity;
#X obj 550 8 inlet;
#X text 594 8 loadbang;
#X obj 189 8 inlet~;
#X text 116 9 from adc~;
#X obj 264 7 inlet;
#X text 308 7 detection level;
#X symbolatom 361 746 18 0 0 0 - - - 0;
#X obj 191 794 tabread4~;
#X obj 189 867 outlet~;
#X obj 241 251 selectasample \$1;
#X obj 550 96 selectasample \$1;
#X obj 745 14 cnv 15 480 140 empty empty SYNTAX 12 15 1 14 #c6ffc7
#404040 0;
#X text 756 39 [processandselect audiochannelnumber(i)], f 42;
#X text 757 67 inlet 1: signal from adc~;
#X text 757 87 inlet 2: detection level setting bonk~ response;
#X text 757 107 inlet 3: bang from main patch loadbang (set values
once on start), f 66;
#X text 757 127 outlet 1: signal to play (playback of sample file)
, f 66;
#X obj 381 41 r \$0-selected_duration;
#X text 422 284 s \$0-selected_duration;
#X text 265 516 start \, end duration ($$ from pack);
#X obj 282 670 makefilename ch\$1sample%d;
#X symbolatom 255 605 14 0 0 0 - - - 0;
#X obj 204 636 v;
#X obj 204 604 t b s;
#X obj 204 545 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X floatatom 204 668 5 0 0 0 - - - 0;
#X obj 550 55 t b b;
#X obj 190 191 t b b;
#X obj 377 637 print selectedsample;
#X obj 204 572 makefilename selectedsample_ch\$1;
#X obj 190 829 *~ 0.75;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 1 0 6 0;
#X connect 2 0 9 0;
#X connect 2 0 46 0;
#X connect 3 0 1 0;
#X connect 7 0 16 0;
#X connect 9 0 29 0;
#X connect 10 0 11 0;
#X connect 10 0 28 0;
#X connect 11 0 29 0;
#X connect 14 0 1 1;
#X connect 15 0 1 2;
#X connect 16 0 21 2;
#X connect 16 0 49 0;
#X connect 17 0 16 1;
#X connect 18 0 17 0;
#X connect 18 0 21 1;
#X connect 19 0 17 0;
#X connect 20 0 18 0;
#X connect 22 0 18 0;
#X connect 22 0 48 0;
#X connect 24 0 7 0;
#X connect 24 0 21 0;
#X connect 26 0 7 0;
#X connect 29 0 52 0;
#X connect 31 0 13 0;
#X connect 31 0 1 1;
#X connect 31 1 4 0;
#X connect 31 1 1 2;
#X connect 32 0 14 0;
#X connect 32 1 15 0;
#X connect 39 0 20 0;
#X connect 39 0 19 0;
#X connect 42 0 10 0;
#X connect 44 0 47 0;
#X connect 44 0 42 0;
#X connect 45 0 44 0;
#X connect 45 1 44 1;
#X connect 46 0 51 0;
#X connect 48 0 32 0;
#X connect 48 1 32 1;
#X connect 49 0 0 0;
#X connect 49 1 31 0;
#X connect 51 0 43 0;
#X connect 51 0 45 0;
#X connect 52 0 30 0;
